"use strict";(self["webpackChunkvostorg_vue"]=self["webpackChunkvostorg_vue"]||[]).push([[277],{277:(e,l,a)=>{a.r(l),a.d(l,{default:()=>h});var t=a(9835),u=a(499),n=a(6970),o=a(9048),i=a(8882),r=a(6850),s=a(7575),m=a(9731),d=a(5190),c=a(3801),f=function(e,l,a,t){function u(e){return e instanceof a?e:new a((function(l){l(e)}))}return new(a||(a=Promise))((function(a,n){function o(e){try{r(t.next(e))}catch(l){n(l)}}function i(e){try{r(t["throw"](e))}catch(l){n(l)}}function r(e){e.done?a(e.value):u(e.value).then(o,i)}r((t=t.apply(e,l||[])).next())}))};const v=(0,t.aZ)({setup(e){const l=(0,r.F)(),a=(0,s.m)(),{fetchMyPersonal:v,saveMyEmail:p}=a,g=(0,t.Fl)((()=>a.personal)),w=(0,u.iH)(!1),{user:{emailLengthMax:b}}=l.config,y=(0,t.f3)("menu"),{requiredRule:h,emailRule:k,maxRule:U,diffRule:q}=(0,i.bA)(),x=(0,u.iH)(!1),S=(0,u.qj)({}),V=(0,u.iH)(""),Z=({email:e})=>(V.value=e,{email:e});(0,t.bv)((()=>f(this,void 0,void 0,(function*(){g.value?(Object.assign(S,Z(g.value)),w.value=!0):(yield v(),g.value&&Object.assign(S,Z(g.value)),w.value=!0)}))));const $=()=>f(this,void 0,void 0,(function*(){x.value=!0;const{email:e,password:l}=S,a={email:e,password:l};try{yield p(a),x.value=!1}catch(t){x.value=!1}})),_=[e=>h(e)],H=[e=>h(e),e=>k(e),e=>U(e,b),e=>q(e,V.value)],W=(0,u.iH)(),M=(0,u.iH)(!1);return(e,l)=>{const a=(0,t.up)("q-input"),i=(0,t.up)("q-form");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(i,{ref_key:"formRef",ref:W,onSubmit:$,onValidationError:l[2]||(l[2]=e=>M.value=!M.value)},{default:(0,t.w5)((()=>[(0,t.Wm)(o.Z,{header:e.$t(e.$route.meta.title),"is-loading":!w.value||x.value,menu:(0,u.SU)(y)},{default:(0,t.w5)((()=>[(0,t.Wm)(c.Z,{class:"q-mb-xl"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,n.zw)(e.$t("my.page.settings.email.banner")),1)])),_:1}),(0,t.Wm)(a,{modelValue:(0,u.SU)(S).password,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,u.SU)(S).password=e),modelModifiers:{trim:!0},label:e.$t("my.page.settings.email.password"),rules:_,"data-required":"true","lazy-rules":"","no-error-icon":"",type:"password"},null,8,["modelValue","label"]),(0,t.Wm)(a,{modelValue:(0,u.SU)(S).email,"onUpdate:modelValue":l[1]||(l[1]=e=>(0,u.SU)(S).email=e),modelModifiers:{trim:!0},hint:e.$t("form.field.constraints.max",{max:e.$tc("plural.symbol",(0,u.SU)(b))}),label:e.$t("entity.user.email"),rules:H,counter:"","data-required":"true","lazy-rules":"","no-error-icon":""},null,8,["modelValue","hint","label"])])),_:1},8,["header","is-loading","menu"])])),_:1},512),(0,t.Wm)(m.Z,{"toggle-fab":M.value},{default:(0,t.w5)((()=>[w.value?((0,t.wg)(),(0,t.j4)(d.Z,{key:0,"on-click":()=>W.value.submit()},null,8,["on-click"])):(0,t.kq)("",!0)])),_:1},8,["toggle-fab"])],64)}}});var p=a(8326),g=a(6611),w=a(9984),b=a.n(w);const y=v,h=y;b()(v,"components",{QForm:p.Z,QInput:g.Z})}}]);